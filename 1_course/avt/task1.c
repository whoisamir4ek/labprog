#include <stdio.h>
#include <stdbool.h>

// Максимальный размер стека
#define MAX_SIZE 100

// Глобальные переменные для стека
char stack[MAX_SIZE];  // Массив для хранения элементов стека
int top = -1;          // Индекс вершины стека (изначально -1 - стек пуст)

// Функция добавления элемента в стек
void push(char c) {
    // Проверка на переполнение стека
    if (top >= MAX_SIZE - 1) {
        printf("Stack overflow\n");
        return;
    }
    // Увеличиваем индекс вершины и добавляем элемент
    stack[++top] = c;
}

// Функция извлечения элемента из стека
char pop() {
    // Проверка на пустоту стека
    if (top < 0) {
        printf("Stack underflow\n");
        return '\0';  // Возвращаем нулевой символ в случае ошибки
    }
    // Возвращаем элемент и уменьшаем индекс вершины
    return stack[top--];
}

// Функция проверки стека на пустоту
bool is_empty() {
    return top == -1;  // Если top равен -1, стек пуст
}

// Функция проверки соответствия открывающей и закрывающей скобок
bool is_match(char open, char close) {
    return (open == '(' && close == ')') ||  // Проверка круглых скобок
           (open == '{' && close == '}') ||  // Проверка фигурных скобок
           (open == '[' && close == ']');    // Проверка квадратных скобок
}

// Основная функция проверки баланса скобок
bool is_balanced(char *str) {
    // Проходим по каждому символу строки
    for (int i = 0; str[i] != '\0'; i++) {
        char c = str[i];  // Текущий символ
        
        // Если символ - открывающая скобка
        if (c == '(' || c == '{' || c == '[') {
            push(c);  // Добавляем в стек
        } 
        // Если символ - закрывающая скобка
        else if (c == ')' || c == '}' || c == ']') {
            // Если стек пуст или скобки не соответствуют
            if (is_empty() || !is_match(pop(), c)) {
                return false;  // Несбалансировано
            }
        }
        // Остальные символы игнорируем
    }
    // Если стек пуст - скобки сбалансированы
    return is_empty();
}

int main() {
    char str[MAX_SIZE];
    printf("Введите строку со скобками: ");
    fgets(str, MAX_SIZE, stdin);  // Чтение строки с консоли

    if (is_balanced(str)) {
        printf("YES\n");  // Скобки сбалансированы
    } else {
        printf("NO\n");   // Скобки несбалансированы
    }

    return 0;
}
