# Отчет по лабораторной работе №4

## Тема: Функции. Базовая работа со строками.

### Комплект 1: Введение в функции

#### Задача 1.1: Факториал

**Постановка задачи:**  
Создать две функции для вычисления факториала числа: одну с использованием цикла, другую с использованием рекурсии. Продемонстрировать их работу.

**Математическая модель:**  
n! = 1 × 2 × 3 × ... × n (для n > 0)  
0! = 1

**Таблица идентификаторов:**
| Идентификатор | Тип                | Описание                     |
|---------------|--------------------|------------------------------|
| n             | int                | Входное число                |
| result        | unsigned long long | Результат вычисления         |
| i             | int                | Счетчик цикла                |

**Код программы:**
```c
#include <stdio.h>

// Функция для вычисления факториала с использованием цикла
unsigned long long factorial_loop(int n) {
    unsigned long long result = 1;
    for (int i = 1; i <= n; i++) {
        result *= i;
    }
    return result;
}

// Функция для вычисления факториала с использованием рекурсии
unsigned long long factorial_recursive(int n) {
    if (n == 0 || n == 1) {
        return 1;
    }
    return n * factorial_recursive(n - 1);
}

int main() {
    int num;
    printf("Введите число для вычисления факториала: ");
    scanf("%d", &num);

    printf("Факториал (цикл): %llu\n", factorial_loop(num));
    printf("Факториал (рекурсия): %llu\n", factorial_recursive(num));

    return 0;
}
```

**Результат работы программы:**
```
Введите число для вычисления факториала: 5
Факториал (цикл): 120
Факториал (рекурсия): 120
```

---

#### Задача 1.2: Обмен значений в массиве

**Постановка задачи:**  
Объявить указатель на массив типа `int`, динамически выделить память для 12 элементов. Написать функцию, которая меняет значения чётных и нечётных ячеек массива.

**Математическая модель:**  
swap(a[i], a[i+1]) для i = 0, 2, 4, ..., n-2

**Таблица идентификаторов:**
| Идентификатор | Тип  | Описание                     |
|---------------|------|------------------------------|
| arr           | int* | Указатель на массив          |
| size          | int  | Размер массива               |
| temp          | int  | Временная переменная обмена  |
| i             | int  | Счетчик цикла                |

**Код программы:**
```c
#include <stdio.h>
#include <stdlib.h>

// Функция для обмена значений чётных и нечётных ячеек массива
void swap_even_odd(int *arr, int size) {
    for (int i = 0; i < size - 1; i += 2) {
        int temp = arr[i];
        arr[i] = arr[i + 1];
        arr[i + 1] = temp;
    }
}

int main() {
    int *arr = (int *)malloc(12 * sizeof(int));
    if (arr == NULL) {
        printf("Ошибка выделения памяти!\n");
        return 1;
    }

    // Заполнение массива
    for (int i = 0; i < 12; i++) {
        arr[i] = i + 1;
    }

    printf("Исходный массив:\n");
    for (int i = 0; i < 12; i++) {
        printf("%d ", arr[i]);
    }
    printf("\n");

    swap_even_odd(arr, 12);

    printf("Массив после обмена:\n");
    for (int i = 0; i < 12; i++) {
        printf("%d ", arr[i]);
    }
    printf("\n");

    free(arr);
    return 0;
}
```

**Результат работы программы:**
```
Исходный массив:
1 2 3 4 5 6 7 8 9 10 11 12 
Массив после обмена:
2 1 4 3 6 5 8 7 10 9 12 11 
```

---

#### Задача 1.3: Двумерный динамический массив

**Постановка задачи:**  
Создать функции для динамического выделения и освобождения памяти под двумерный массив типа `double`. Также создать функции для заполнения и вывода матрицы.

**Математическая модель:**  
M[i][j] = i + j + 0.5, где i = 0..rows-1, j = 0..cols-1

**Таблица идентификаторов:**
| Идентификатор | Тип      | Описание                     |
|---------------|----------|------------------------------|
| matrix        | double** | Указатель на матрицу         |
| rows          | int      | Количество строк             |
| cols          | int      | Количество столбцов          |
| i, j          | int      | Счетчики циклов              |

**Код программы:**
```c
#include <stdio.h>
#include <stdlib.h>

// Функция для выделения памяти под матрицу
double **allocate_matrix(int rows, int cols) {
    double **matrix = (double **)malloc(rows * sizeof(double *));
    if (matrix == NULL) {
        return NULL;
    }
    for (int i = 0; i < rows; i++) {
        matrix[i] = (double *)malloc(cols * sizeof(double));
        if (matrix[i] == NULL) {
            for (int j = 0; j < i; j++) {
                free(matrix[j]);
            }
            free(matrix);
            return NULL;
        }
    }
    return matrix;
}

// Функция для освобождения памяти матрицы
void free_matrix(double **matrix, int rows) {
    for (int i = 0; i < rows; i++) {
        free(matrix[i]);
    }
    free(matrix);
}

// Функция для заполнения матрицы
void fill_matrix(double **matrix, int rows, int cols) {
    for (int i = 0; i < rows; i++) {
        for (int j = 0; j < cols; j++) {
            matrix[i][j] = i + j + 0.5;
        }
    }
}

// Функция для вывода матрицы
void print_matrix(double **matrix, int rows, int cols) {
    for (int i = 0; i < rows; i++) {
        for (int j = 0; j < cols; j++) {
            printf("%.2f ", matrix[i][j]);
        }
        printf("\n");
    }
}

int main() {
    int rows = 3, cols = 3;
    double **matrix = allocate_matrix(rows, cols);
    if (matrix == NULL) {
        printf("Ошибка выделения памяти!\n");
        return 1;
    }

    fill_matrix(matrix, rows, cols);
    printf("Матрица:\n");
    print_matrix(matrix, rows, cols);

    free_matrix(matrix, rows);
    return 0;
}
```

**Результат работы программы:**
```
Матрица:
0.50 1.50 2.50 
1.50 2.50 3.50 
2.50 3.50 4.50 
```

---

### Комплект 2: Базовые операции со строками

#### Задача 2.1: Работа со строками

**Постановка задачи:**  
Выполнить базовые операции со строками: вычисление длины, копирование, конкатенация, сравнение, перевод регистра.

**Таблица идентификаторов:**
| Идентификатор | Тип    | Описание                     |
|---------------|--------|------------------------------|
| my_string     | char[] | Входная строка               |
| second_string | char[] | Копия строки                 |
| str1, str2    | char[] | Строки для конкатенации      |
| str3, str4    | char[] | Строки для сравнения         |
| mixed_case    | char[] | Строка для изменения регистра |
| ptr           | char*  | Указатель для вычисления длины |
| length        | int    | Длина строки                 |

**Код программы:**
```c
#include <stdio.h>
#include <string.h>
#include <ctype.h>
#include <locale.h>

#define MY_SIZE 20

int main() {
    setlocale(LC_ALL, "en_US.iso88591");

    char my_string[MY_SIZE];
    printf("Введите строку (до 10 символов): ");
    fgets(my_string, MY_SIZE, stdin);
    my_string[strcspn(my_string, "\n")] = '\0'; // Удаление символа новой строки

    // 1. Вычисление длины строки с использованием цикла
    int length = 0;
    for (; my_string[length] != '\0'; length++);
    printf("Длина строки (цикл): %d\n", length);

    // 2. Вычисление длины строки с использованием указателя
    char *ptr = my_string;
    int ptr_length = 0;
    while (*ptr++) ptr_length++;
    printf("Длина строки (указатель): %d\n", ptr_length);

    // 3. Вычисление длины строки с использованием strlen
    printf("Длина строки (strlen): %zu\n", strlen(my_string));

    // 4. Копирование строки
    char second_string[MY_SIZE];
    strcpy(second_string, my_string);
    printf("Скопированная строка: %s\n", second_string);

    // 5. Конкатенация строк
    char str1[MY_SIZE] = "Hello";
    char str2[] = "World";
    strcat(str1, str2);
    printf("Результат конкатенации: %s\n", str1);

    // 6. Сравнение строк
    char str3[] = "apple";
    char str4[] = "banana";
    int cmp_result = strcmp(str3, str4);
    printf("Результат сравнения: %d\n", cmp_result);

    // 7. Перевод регистра
    char mixed_case[] = "AbCdEf";
    printf("Исходная строка: %s\n", mixed_case);
    for (int i = 0; mixed_case[i]; i++) {
        mixed_case[i] = tolower(mixed_case[i]);
    }
    printf("В нижнем регистре: %s\n", mixed_case);
    for (int i = 0; mixed_case[i]; i++) {
        mixed_case[i] = toupper(mixed_case[i]);
    }
    printf("В верхнем регистре: %s\n", mixed_case);

    return 0;
}
```

**Результат работы программы:**
```
Введите строку (до 10 символов): test
Длина строки (цикл): 4
Длина строки (указатель): 4
Длина строки (strlen): 4
Скопированная строка: test
Результат конкатенации: HelloWorld
Результат сравнения: -1
Исходная строка: AbCdEf
В нижнем регистре: abcdef
В верхнем регистре: ABCDEF
```

---

#### Задача 2.2: Конвертация строк в числа

**Постановка задачи:**  
Конвертировать строки, представляющие числа, в значения типов `double` и `int`.

**Таблица идентификаторов:**
| Идентификатор | Тип    | Описание                     |
|---------------|--------|------------------------------|
| float_str     | char[] | Строка с дробным числом      |
| int_str       | char[] | Строка с целым числом        |
| float_num     | double | Конвертированное число       |
| int_num       | int    | Конвертированное число       |

**Код программы:**
```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    char float_str[] = "3.14";
    char int_str[] = "42";

    double float_num = atof(float_str);
    int int_num = atoi(int_str);

    printf("Конвертированное double: %.2f\n", float_num);
    printf("Конвертированное int: %d\n", int_num);

    return 0;
}
```

**Результат работы программы:**
```
Конвертированное double: 3.14
Конвертированное int: 42
```

---

#### Задача 2.3: Анализ символов строки

**Постановка задачи:**  
Создать строку и проанализировать каждый символ с помощью функций типа `isalpha`, `isdigit` и т.д.

**Таблица идентификаторов:**
| Идентификатор | Тип  | Описание                     |
|---------------|------|------------------------------|
| str           | char[] | Анализируемая строка        |
| i             | int  | Счетчик цикла                |

**Код программы:**
```c
#include <stdio.h>
#include <ctype.h>

int main() {
    char str[] = "A1b2 C3!";

    for (int i = 0; str[i] != '\0'; i++) {
        printf("Символ '%c':\n", str[i]);
        if (isalpha(str[i])) {
            printf("  Это буква.\n");
        }
        if (isdigit(str[i])) {
            printf("  Это цифра.\n");
        }
        if (isspace(str[i])) {
            printf("  Это пробельный символ.\n");
        }
        if (ispunct(str[i])) {
            printf("  Это символ пунктуации.\n");
        }
    }

    return 0;
}
```

**Результат работы программы:**
```
Символ 'A':
  Это буква.
Символ '1':
  Это цифра.
Символ 'b':
  Это буква.
Символ '2':
  Это цифра.
Символ ' ':
  Это пробельный символ.
Символ 'C':
  Это буква.
Символ '3':
  Это цифра.
Символ '!':
  Это символ пунктуации.
```

---

### Информация о студенте:
**Аглиуллин Амир, 1 курс, ИВТ-1(2).**
